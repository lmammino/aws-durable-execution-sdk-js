<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@aws/durable-execution-sdk-js](./durable-execution-sdk-js.md) &gt; [createRetryStrategy](./durable-execution-sdk-js.createretrystrategy.md)

## createRetryStrategy() function

Creates a retry strategy function with exponential backoff and configurable jitter

**Signature:**

```typescript
createRetryStrategy: (config?: RetryStrategyConfig) =>
  (error: Error, attemptsMade: number) =>
    RetryDecision;
```

## Parameters

<table><thead><tr><th>

Parameter

</th><th>

Type

</th><th>

Description

</th></tr></thead>
<tbody><tr><td>

config

</td><td>

[RetryStrategyConfig](./durable-execution-sdk-js.retrystrategyconfig.md)

</td><td>

_(Optional)_ Configuration options for the retry strategy

</td></tr>
</tbody></table>

**Returns:**

(error: Error, attemptsMade: number) =&gt; [RetryDecision](./durable-execution-sdk-js.retrydecision.md)

A function that determines whether to retry and calculates delay based on error and attempt count

## Remarks

The returned function takes an error and attempt count, and returns a [RetryDecision](./durable-execution-sdk-js.retrydecision.md) indicating whether to retry and the delay before the next attempt.

\*\*Delay Calculation:\*\* - Base delay = `initialDelay Ã— backoffRate^(attemptsMade - 1)` - Capped at `maxDelay` - Jitter applied based on `jitter` strategy - Final delay rounded to nearest second, minimum 1 second

\*\*Error Filtering:\*\* - If neither `retryableErrors` nor `retryableErrorTypes` is specified: all errors are retried - If either is specified: only matching errors are retried - If both are specified: errors matching either criteria are retried (OR logic)

## Example

```typescript
// Basic usage with defaults (retry all errors, 3 attempts, exponential backoff)
const defaultRetry = createRetryStrategy();

// Custom retry with more attempts and specific delays
const customRetry = createRetryStrategy({
  maxAttempts: 5,
  initialDelay: { seconds: 10 },
  maxDelay: { seconds: 60 },
  backoffRate: 2,
  jitter: JitterStrategy.HALF,
});

// Retry only specific error types
class TimeoutError extends Error {}
const typeBasedRetry = createRetryStrategy({
  retryableErrorTypes: [TimeoutError],
});

// Retry only errors matching message patterns
const patternBasedRetry = createRetryStrategy({
  retryableErrors: [/timeout/i, /connection/i, "rate limit"],
});

// Combine error types and patterns
const combinedRetry = createRetryStrategy({
  retryableErrorTypes: [TimeoutError],
  retryableErrors: [/network/i],
});

// Use in step configuration
await context.step(
  "api-call",
  async () => {
    return await callExternalAPI();
  },
  { retryStrategy: customRetry },
);
```
