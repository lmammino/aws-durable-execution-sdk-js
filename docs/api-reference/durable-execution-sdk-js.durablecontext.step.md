<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@aws/durable-execution-sdk-js](./durable-execution-sdk-js.md) &gt; [DurableContext](./durable-execution-sdk-js.durablecontext.md) &gt; [step](./durable-execution-sdk-js.durablecontext.step.md)

## DurableContext.step() method

Executes a function as a durable step with automatic retry and state persistence

**Signature:**

```typescript
step<TOutput>(name: string | undefined, fn: StepFunc<TOutput, TLogger>, config?: StepConfig<TOutput>): DurablePromise<TOutput>;
```

## Parameters

<table><thead><tr><th>

Parameter

</th><th>

Type

</th><th>

Description

</th></tr></thead>
<tbody><tr><td>

name

</td><td>

string \| undefined

</td><td>

Step name for tracking and debugging

</td></tr>
<tr><td>

fn

</td><td>

[StepFunc](./durable-execution-sdk-js.stepfunc.md)<!-- -->&lt;TOutput, TLogger&gt;

</td><td>

Function to execute as a durable step

</td></tr>
<tr><td>

config

</td><td>

[StepConfig](./durable-execution-sdk-js.stepconfig.md)<!-- -->&lt;TOutput&gt;

</td><td>

_(Optional)_ Optional configuration for retry strategy, semantics, and serialization

</td></tr>
</tbody></table>

**Returns:**

[DurablePromise](./durable-execution-sdk-js.durablepromise.md)<!-- -->&lt;TOutput&gt;

## Exceptions

{<!-- -->StepError<!-- -->} When the step function fails after all retry attempts are exhausted

## Remarks

\*\*IMPORTANT\*\*: `step()` is designed for single atomic operations and cannot be used to group multiple durable operations (like other steps, waits, or child contexts). The step function receives a simple `StepContext` (for logging only), not a full `DurableContext`<!-- -->.

\*\*To group multiple durable operations, use `runInChildContext()` instead:\*\*

```typescript
// ❌ WRONG: Cannot call durable operations inside step
await context.step("process-order", async (ctx) => {
  await context.wait({ seconds: 1 });    // ERROR: context not available
  await context.step(async () => ...);   // ERROR: context not available
  return result;
});

// ✅ CORRECT: Use runInChildContext to group operations
await context.runInChildContext("process-order", async (childCtx) => {
  await childCtx.wait({ seconds: 1 });
  const step1 = await childCtx.step(async () => validateOrder(order));
  const step2 = await childCtx.step(async () => chargePayment(step1));
  return step2;
});
```

## Example

```typescript
// ✅ Good: Single atomic operation
const result = await context.step(
  "fetch-user-data",
  async (ctx) => {
    return await fetchUserFromAPI(userId);
  },
  { retryStrategy: exponentialBackoff },
);
```
